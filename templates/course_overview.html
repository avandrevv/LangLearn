{% extends 'base.html' %} {% block title %}–ö—É—Ä—Å: {{ course.topic }}{% endblock
%} {% block body %}
<div class="container my-5">
  <h1 class="mb-4">–ö—É—Ä—Å –ø–æ —Ç–µ–º–µ: <strong>{{ course.topic }}</strong></h1>
  <h5>
    –í–∞—à —É—Ä–æ–≤–µ–Ω—å:
    <span class="badge bg-secondary">{{ course.initial_level }}</span>
  </h5>

  {% if subtopics|length == 0 %}
  <p class="mt-3">–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫—É—Ä—Å–∞ –ø–æ–∫–∞ –Ω–µ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–∞.</p>
  <form method="post" action="/generate_course_structure/{{ course.id }}">
    <button class="btn btn-primary">–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É</button>
  </form>
  {% else %}
  <div class="row mt-4">
    {% for sub in subtopics %}
    <div class="col-md-4">
      <div
        class="card mb-3 shadow {% if not sub.is_unlocked %}border-secondary{% endif %}"
      >
        <div class="card-header">
          <strong>{{ sub.name }}</strong>
        </div>
        <div class="card-body">
          <p>
            –°—Ç–∞—Ç—É—Å: {% if sub.is_completed %}
            <span class="badge bg-success">‚úÖ –ü—Ä–æ–π–¥–µ–Ω–æ</span>
            {% elif not sub.is_unlocked %}
            <span class="badge bg-secondary">üîí –ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–æ</span>
            {% else %}
            <span class="badge bg-warning text-dark">üïì –î–æ—Å—Ç—É–ø–Ω–æ</span>
            {% endif %}
          </p>
          {% if sub.is_unlocked and not sub.is_completed %}
          <a
            href="/course/{{ course.id }}/{{ sub.name | urlencode }}"
            class="btn btn-outline-primary"
            >–ü–µ—Ä–µ–π—Ç–∏</a
          >
          {% elif sub.is_completed %}
          <button class="btn btn-outline-success" disabled>–ì–æ—Ç–æ–≤–æ</button>
          {% else %}
          <button class="btn btn-outline-secondary" disabled>–ù–µ–¥–æ—Å—Ç—É–ø–Ω–æ</button>
          {% endif %}
        </div>
      </div>
    </div>
    {% endfor %}
  </div>

  {% if subtopics | selectattr('is_completed') | list | length == subtopics |
  length %}
  <div class="text-center mt-5">
    {% if course.is_final_test_passed %}
    <div class="alert alert-success">
      üèÜ <strong>–ö—É—Ä—Å –∑–∞–≤–µ—Ä—à—ë–Ω!</strong> –í—ã –ø—Ä–æ—à–ª–∏ —Ñ–∏–Ω–∞–ª—å–Ω—ã–π —Ç–µ—Å—Ç.
    </div>
    <a href="/final_test/{{ course.id }}" class="btn btn-outline-secondary">
      –ü–µ—Ä–µ—Å–º–æ—Ç—Ä–µ—Ç—å —Ñ–∏–Ω–∞–ª—å–Ω—ã–π —Ç–µ—Å—Ç
    </a>
    {% else %}
    <a href="/final_test/{{ course.id }}" class="btn btn-lg btn-success">
      üéì –ü—Ä–æ–π—Ç–∏ —Ñ–∏–Ω–∞–ª—å–Ω—ã–π —Ç–µ—Å—Ç
    </a>
    {% endif %}
  </div>
  {% endif %} {% endif %}
</div>
{% endblock %}
